웹의 흐름

- Generator
  - iterator 를 생성해주는 함수. next() 를 통해 데이터 접근 가능 
  - yield 를 사용, 값을 리턴하고 종료되는 것이 아닌 정지된 상태(메모리에)로 유지
  - iterable
    - 값을 하나씩(순차적으로) 반환 가능한 객체 
    - list, str, typle
    - for 문에 list 를 넣을 경우 iterator 로 동작하게 함

- 클래스 상속
  - 메서드의 동작
  - super()
  - 다형성
    - 부모클래스의 메서드를 자식에서 오버라이딩해서 사용(다른 동작, 리턴 가능)
    - 자바의 오버로딩의 경우 데이터타입이 무엇이냐에 따라 다른 메소드 호출
  - 추상화
    - 공통의 속성과 기능을 묶어놓는 것 
    - 추상클래스의 경우, 객체를 만들어낼 수 없다. 상속해서만 사용가능(abstractclass property 사용하면 됨)
- 웹브라우져에서 일어나는 일
  - \1. url 을 웹브라우져가 해석한다
    - 프로토콜을 인식하고 url 문법에 따라 ip 가 필요한 정보인지 판별
    - 프로토콜은 보통 http 이고 만약 url 문법에 맞지 않는다면 기본 검색엔진으로 검색 요청
    - url 을 해석하여 http request 메시지를 만든다 header, body
      - crud 에 해당하는 method 등을 포함하며 부가적인 정보를 header 에 설정가능,
      - 보통 header 의 content type 은 json 형식
      - post 와 같이 정보를 입력해야한다면 body 값에 담긴다.
  - \2. 브라우져는 socket 라이브러리로 DNS(domain name server) 서버로 도메인 주소를 보내 ip 주소를 얻는다.
    - dns 서버는 입력된 naver.com 이라는 도메인에 해당하는 ip 주소를 response
    - 이 떄 socket 을 이용한다는 것은 OS 내부에 포함된 프로토콜 스택(네트워크 제어용 tcp/ip 소프트웨어)을 호출을 의미
  - \3. 프로토콜 스택에 메시지 송신을 의뢰 
    - OS 에 http request 요청 메시지를 처리해달라고 요청한다. 프로토콜 스택인 tcp/ip 에 해당한다. 이때 OS 에 의뢰하는 것 또한 소켓을 사용한다. 
    - 의뢰를 하게되면 클라이언트와 서버 사이에는 데이터의 통로가 생겨 데이터를 주고받을 수 있다. 이때 각 사이드의 통로의 입구를 socket 이라고 한다.(tcp는 연결형의 특징을 가진다) 
      -  소켓은 osi 의 transport 위층인 5. session 계층에 속한다
      - \1. 서버, 클라이언트 모두 소켓 만든다
      - \2. 클라이언트의 소켓이 서버 소켓에 연결한다.
      - \3. 데이터 송수신 후 끝나면 소켓 없앤다.
    - 이 때 tcp 에서 만든 헤더를 ip 에 건내줘서 송신을 의뢰한다
  - \4. 프로토콜 스택에서 http request 메시지를 통해 소켓을 작성하고 완료 후 브라우져가 이를 제어할 수 있게 한다
  - \5. 프로토콜 스택에서 서버쪽으로 패킷을 보낸다.(http 요청 메시지를 보낸다) 
    - 3 way handshake
      - \1. 클라이언트: 서버야 너랑 통신할건데 잘 받으면 알려줘라
      - \2. 서버: 잘받았다 넌 내말 들리니?
      - \3. 클라이언트: 응 잘들려 이제 통신합시다.
  - 서버는 받은 패킷을 ip-> tcp -> app 순서로 전달하여 200을 송신한 후 그에맞는 패킷을 다시 전송한다.
- http 란 
  - tcp/ip 프로토콜을 기반으로 작동하는 어플리케이션 프로토콜이라고 할 수 있다. 
  - http 프로토콜은 서버에게 클라이언트의 의도를 표현할 툴을 제공한다. uri 혹은 http 헤더에 해당
    - rest 에서 CRUD 요청을 설정한 후 uri 를 작성하는데 이때 uri 가 중요한 이유가 바로 이에 해당. 왜냐면 서버쪽에서 효율적으로 데이터를 응답할 수 있게 하기위해서 

- 덧붙여
  - url 을 작성하면 그 요청은 DHCP 에서 내 ip 가까운 라우터 ip 가까운 DNS ip 를 받는다. 이후 arp 프로토콜을 이용하여 가까운 라우터 MAC 주소를 알아낸다. 이렇게되면 통신 할 준비를 마친것이고 DNS 쿼리를 DNS 서버에 전송해서 서버 ip 주소를 받는다. 그 다음 http request 를 위해 tcp socket 을 개방하는데 3 hand shaking 이 일어나고 연결에 성공하면 tcp socket 을통해 http request 가 보내진다.
  - http 는 웹어플리케이션과 tcp 가 소통하는 방식(프로토콜)이다
  - http 프로토콜을 통해 작성된 http request 메시지를 tcp 가 받아서 처리하는 것
  - GET 방식 : 내용이 URL에 포함된다. 정적인 웹 페이지처럼 다룰 수 있음. 간단한 요청, 또는 보안이 필요 없는 요청에 사용.
  - POST 방식 : 내용이 Body에 담긴다. 정보를 저장하거나 변경할 때 사용. GET 보다 더 큰 데이터를 전송 
  - 만약 응답받은 html 파일에 css, javascript 가 있을 경우 다시 요청을 보내서 받아오는데 자바스크립트의 경우 브라우져가 아닌 자바스크립트로 작성된 프로그램이 웹서버와 통신하는 것
  - 서버에서 응답시 html 파일 내용을 바디에 담아 패킷으로 나누어 보내준다
- 계층
  - \1. 어플리케이션(http, ssh, https, ftp) 2. tcp(udp)- 트랜스포트 3. ip- 인터넷 4.네트워크 인터페이스
  - 어플리케이션 에서 tcp 로 http 프로토콜을 이용한 http request 보냄
  - tcp 는 
    - 어플리케이션의 데이터를 송/수신, 인터넷계층에서 보낸/받은 데이터를 어플리케이션으로 전달하는 역할, 
    - 어플리케이션 구분은 port 번호(http: 80, ssh: 22) <- 수신 시에 해당
    - 송신 시 클라이언트는 브라우져에서 다이나믹포트중 하나를 할당받아 웹서버의 80번과 통신한다. 이때 웹서버는 클라이언트의 ip 와 port 번호를 조합해 클라이언트를 식별한다. 
    - tcp segment 는?
      - http request 메시지에 해당하는 데이터혹은 응답할 메시지를 잘게 파편화해서 헤더를 추가해주는데 헤더정보에 sequence number, ip, port 등의 정보가 들어간다.
      - sequence number 값을 통해 잘게 나누어진 패킷을 우리가 사용할 데이터로 조합하게 해준다
  - udp 는
    - tcp 와 함께 transport 계층에 해당하며 정확성을 중시하는 tcp 와 달리 신뢰성 확보 처리가 없어 더 빠른 통신이 가능한 특징이있다
    - 특수한경우를 제외하고는 DNS 는 UDP 를 사용한다. 
    - tcp 는 연결지향이지만 UDP/ip 는 비 연결지향이다 
    - dns 뿐만아니라 ip 정보를 셋팅하기 위한 DHCP 역시 UDP 를 사용한다.
  - ip 는
    - ip 주소를 header 에 덧붙여 목적지까지 전달하는 역할
    - 라우터라는 장비가 사용된다
    - tcp 에서 온 세그먼트에 ip 정보를 추가하는 헤더를 앞에 붙여줌
  - tcp/ip 는 하나의 프로토콜을 지칭하는것이 아니라 각종 표준 프로토콜의 집합이라 이해하면 된다

- DHCP
  - lan 내의 컴퓨터에게 ip 주소를 할당할 때 사용, 가까운 라우터의 ip, 내 ip 등을 얻는다
- DNS
  - 도메인과 ip 를 변활할때 사용
- 쿠키와 세션
  - http 프로토콜은 connectionless, stateless. 비연결성이라는 특징떄문에 session 과 cookie 필요
  - 세션의 경우 메모리, 파일 db 에 모두 저장가능하나 db 에 보통 저장, 쿠키는 브라우져에 저장
  - 세션 id 를 쿠키에 알려줘서 쿠키는 session_id 를 request 시에 헤더에 담아 보낸다
-  라우터
  - 패킷의 최적경로를 찾아주는 장치이다. 라우터 역시 ip 를 가지고있으며 lan 과 wan 같은 다른방식의 네트워크를 연결해준다.